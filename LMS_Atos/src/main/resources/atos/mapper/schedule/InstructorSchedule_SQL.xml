<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="atos.lms.schedule.service.dao.InstructorScheduleDAO">


    <!-- 강사별 스케줄 조회 -->
    <select id="selectScheduleByInstructor" resultType="atos.lms.schedule.service.InstructorScheduleVO">
        SELECT SCHEDULE_CODE, ID, SCHEDULE_DATE, MAIN_EVENT, SUB_EVENT, START_TIME, END_TIME
        FROM ATOS_INSTRUCTOR_SCHEDULE
        WHERE ID = #{id}  <!-- 동적으로 전달된 ID를 사용 -->
        <if test="scheduleDate != null">
            AND SCHEDULE_DATE = #{scheduleDate}
        </if>
    </select>
    
    <!-- 스케줄 총 개수 조회 -->
    <select id="selectScheduleCountByInstructor" resultType="int">
        SELECT COUNT(SCHEDULE_CODE)
        FROM ATOS_INSTRUCTOR_SCHEDULE
        WHERE ID = #{id}  <!-- 동적으로 전달된 ID를 사용 -->
        <if test="scheduleDate != null">
            AND SCHEDULE_DATE = #{scheduleDate}
        </if>
    </select>

    <!-- 모든 강사 목록 조회 -->
    <select id="selectAllInstructors" resultType="atos.lms.schedule.service.InstructorScheduleVO">
        SELECT ID, NAME
        FROM ATOS_INSTRUCTOR  <!-- 강사 목록 조회 -->
    </select>

    <!-- MAIN_EVENT 등록 -->
    <insert id="insertMainEvent" parameterType="atos.lms.schedule.service.InstructorScheduleVO">
        INSERT INTO ATOS_INSTRUCTOR_SCHEDULE (ID, SCHEDULE_DATE, MAIN_EVENT)
        VALUES (#{id}, #{scheduleDate}, #{mainEvent})  <!-- 동적으로 전달된 값들 사용 -->
    </insert>

    <!-- SUB_EVENT 등록 (시간 정보 포함) -->
    <insert id="insertSubEvent" parameterType="atos.lms.schedule.service.InstructorScheduleVO">
        INSERT INTO ATOS_INSTRUCTOR_SCHEDULE (ID, SCHEDULE_DATE, SUB_EVENT, START_TIME, END_TIME)
        VALUES (#{id}, #{scheduleDate}, #{subEvent}, #{startTime}, #{endTime})  <!-- 동적으로 전달된 시간 정보 추가 -->
    </insert>



</mapper>